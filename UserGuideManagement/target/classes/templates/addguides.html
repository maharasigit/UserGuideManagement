<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add Guide</title>
    <meta charset="UTF-8"/>
    <script>
        // Add new Day block
        function addDay() {
            const daysDiv = document.getElementById("days-container");
            const dayIndex = daysDiv.children.length;

            const dayBlock = document.createElement("div");
            dayBlock.classList.add("day-block");

            dayBlock.innerHTML = `
                <h4>Day ${dayIndex + 1}</h4>
                <label>Day Number:</label>
                <input type="number" name="days[${dayIndex}].dayNumber" /><br/>

                <div class="activities" id="activities-${dayIndex}">
                    <h5>Activities</h5>
                </div>
                <button type="button" onclick="addActivity(${dayIndex})">+ Add Activity</button>
                <hr/>
            `;
            daysDiv.appendChild(dayBlock);
        }

        // Add activity to a specific Day
        function addActivity(dayIndex) {
            const activitiesDiv = document.getElementById("activities-" + dayIndex);
            const activityIndex = activitiesDiv.querySelectorAll(".activity-block").length;

            const activityBlock = document.createElement("div");
            activityBlock.classList.add("activity-block");

            activityBlock.innerHTML = `
                <h5>Activity ${activityIndex + 1}</h5>
                <label>Title:</label>
                <input type="text" name="days[${dayIndex}].activities[${activityIndex}].title" /><br/>

                <label>Description:</label>
                <input type="text" name="days[${dayIndex}].activities[${activityIndex}].description" /><br/>

                <label>Type:</label>
                <select name="days[${dayIndex}].activities[${activityIndex}].type">
                    <option value="MUSEUM">Museum</option>
                    <option value="CASTLE">Castle</option>
                    <option value="ACTIVITY">Activity</option>
                    <option value="PARK">Park</option>
                    <option value="CAVE">Cave</option>
                </select><br/>

                <label>Location:</label>
                <input type="text" name="days[${dayIndex}].activities[${activityIndex}].location" /><br/>

                <label>Visit Order:</label>
                <input type="number" name="days[${dayIndex}].activities[${activityIndex}].visitOrder" /><br/>

                <label>Opening Hours:</label>
                <input type="text" name="days[${dayIndex}].activities[${activityIndex}].openingHours" /><br/>

                <label>Website:</label>
                <input type="url" name="days[${dayIndex}].activities[${activityIndex}].website" /><br/>
                <br/>
            `;

            activitiesDiv.appendChild(activityBlock);
        }
    </script>
</head>
<body>
<h1>Add New User Guide with Days & Activities</h1>

<form th:action="@{/userguides/add}" th:object="${guide}" method="post">

    <label>Guide Title:</label>
    <input type="text" th:field="*{title}" /><br/><br/>

    <label>Description:</label>
    <textarea th:field="*{description}"></textarea><br/><br/>

    <label>Number of Days:</label>
    <input type="number" th:field="*{numberOfDays}" /><br/><br/>

    <label>Transportation:</label>
    <select th:field="*{transportation}">
        <option value="CAR">Car</option>
        <option value="BIKE">Bike</option>
        <option value="WALK">On Foot</option>
        <option value="MOTORBIKE">Motorbike</option>
    </select><br/><br/>

    <label>Season:</label>
    <select th:field="*{season}">
        <option value="SUMMER">Summer</option>
        <option value="SPRING">Spring</option>
        <option value="AUTUMN">Autumn</option>
        <option value="WINTER">Winter</option>
    </select><br/><br/>

    <label>Type:</label>
    <select th:field="*{type}">
        <option value="FAMILY">Family</option>
        <option value="SOLO">Solo</option>
        <option value="GROUP">Group</option>
        <option value="FRIENDS">With Friends</option>
    </select><br/><br/>

    <h3>Days</h3>
    <div id="days-container"></div>

    <button type="button" onclick="addDay()">+ Add Day</button>
    <br/><br/>

    <button type="submit">Save Guide</button>
</form>

<a href="/userguides">Back to Guides</a>
</body>
</html>


